<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MAXEE-KIOSK</title>

    <!-- ‚úÖ Google Î≤àÏó≠ Î¶¨ÏÜåÏä§ Ï∫êÏã± & ÏÇ¨Ï†ÑÏó∞Í≤∞ -->
    <link rel="preconnect" href="https://translate.google.com">
    <link rel="preconnect" href="https://translate.googleapis.com">
    <link rel="dns-prefetch" href="https://translate.google.com">
    <link rel="dns-prefetch" href="https://translate.googleapis.com">
    <link rel="preload" as="script" href="https://translate.google.com/translate_a/element.js">

    <style>
      .goog-te-banner-frame.skiptranslate,
      .goog-te-gadget-icon { display: none !important; }
      body { top: 0 !important; }
      .goog-logo-link, .goog-te-gadget span { display: none !important; }
      #google_translate_element { display: none; }
      .goog-te-gadget-simple, .VIpgJd-ZVi9od-ORHb-OEVmcd,
      .goog-tooltip, .goog-tooltip:hover { display: none !important; }
      .goog-text-highlight { background: none !important; box-shadow: none !important; }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <!-- Ïà®Í≤®ÏßÑ Î≤àÏó≠ ÏúÑÏ†Ø Ïª®ÌÖåÏù¥ÎÑà -->
    <div id="google_translate_element" aria-hidden="true"></div>

    <!-- ‚úÖ React Ïï± ÏóîÌä∏Î¶¨ -->
    <script type="module" src="src/index.jsx"></script>

    <!-- ‚úÖ 1. Î≤àÏó≠ Ïø†ÌÇ§ ÏÑ§Ï†ï -->
    <script>
      (function() {
        const savedLang = localStorage.getItem("app_lang");
        if (savedLang && savedLang !== "ko") {
          const targetLang = savedLang.startsWith("zh") ? "zh-CN" : savedLang;
          document.cookie = `googtrans=/ko/${targetLang}; path=/`;
          document.cookie = `googtrans=/ko/${targetLang}; path=/; domain=${window.location.hostname}`;
          console.log(`‚úÖ Ï¥àÍ∏∞ Íµ¨Í∏Ä Î≤àÏó≠ Ïø†ÌÇ§ ÏÑ§Ï†ï: /ko/${targetLang}`);
        }
      })();
    </script>

    <!-- ‚úÖ 2. Íµ¨Í∏Ä Î≤àÏó≠ Ï¥àÍ∏∞Ìôî Ìï®Ïàò -->
    <script>
      window.activeLang = localStorage.getItem("app_lang") || "ko";

      function googleTranslateElementInit() {
        if (window.googleTranslateInitCalled) return;
        window.googleTranslateInitCalled = true;

        new google.translate.TranslateElement(
          {
            pageLanguage: "ko",
            includedLanguages: "ko,en,es,zh-CN,zh-TW,ja",
            layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
            autoDisplay: false,
          },
          "google_translate_element"
        );

        console.log("‚úÖ Google Translate initialized");
        window.dispatchEvent(new Event("google-translate-load"));

        // ‚úÖ React ÌÖçÏä§Ìä∏(ÏûêÎßâ Ìè¨Ìï®) ÏûêÎèô Ïû¨Î≤àÏó≠ Í∞êÏãú
        const observer = new MutationObserver(() => {
          const lang = localStorage.getItem("app_lang") || "ko";
          if (lang !== "ko" && window.google && google.translate) {
            const select = document.querySelector(".goog-te-combo");
            if (select && select.value !== lang) {
              select.value = lang;
              select.dispatchEvent(new Event("change"));
              console.log(`üåê Î≤àÏó≠ Îã§Ïãú Ï†ÅÏö©Îê®: ${lang}`);
            }
          }
        });
        observer.observe(document.getElementById("root"), {
          childList: true,
          subtree: true,
        });
      }
    </script>

    <!-- ‚úÖ 3. Íµ¨Í∏Ä Î≤àÏó≠ Ïä§ÌÅ¨Î¶ΩÌä∏ (Ï∫êÏã± ÌôúÏÑ±) -->
    <script
  defer
  src="https://translate.googleapis.com/translate_a/element.js?cb=googleTranslateElementInit"
></script>
  </body>
</html>
